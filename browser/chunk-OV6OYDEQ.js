import{i as r}from"./chunk-GHQHBVAT.js";import{a as c,e as E,h as v,k as y}from"./chunk-R4YTUUEB.js";var P="ionViewWillEnter",V="ionViewDidEnter",k="ionViewWillLeave",T="ionViewDidLeave",z="ionViewWillUnload",o=n=>{n.tabIndex=-1,n.focus()},l=n=>n.offsetParent!==null,_=()=>({saveViewFocus:i=>{if(c.get("focusManagerPriority",!1)){let a=document.activeElement;a!==null&&(i!=null&&i.contains(a))&&a.setAttribute(w,"true")}},setViewFocus:i=>{let t=c.get("focusManagerPriority",!1);if(Array.isArray(t)&&!i.contains(document.activeElement)){let a=i.querySelector(`[${w}]`);if(a&&l(a)){o(a);return}for(let s of t)switch(s){case"content":let u=i.querySelector('main, [role="main"]');if(u&&l(u)){o(u);return}break;case"heading":let f=i.querySelector('h1, [role="heading"][aria-level="1"]');if(f&&l(f)){o(f);return}break;case"banner":let g=i.querySelector('header, [role="banner"]');if(g&&l(g)){o(g);return}break;default:E(`Unrecognized focus manager priority value ${s}`);break}o(i)}}}),w="ion-last-focus",p=()=>import("./chunk-GUOAJMQE.js"),W=()=>import("./chunk-NRL3YAWG.js"),C=_(),N=n=>new Promise((e,i)=>{y(()=>{let t=O(n);S(n,t),B(n).then(a=>{a.animation&&a.animation.destroy(),b(n),e(a)},a=>{b(n),i(a)}).finally(()=>{A(t,!1)})})}),S=(n,e)=>{let i=n.enteringEl,t=n.leavingEl;C.saveViewFocus(t),H(i,t,n.direction),A(e,!0),n.showGoBack?i.classList.add("can-go-back"):i.classList.remove("can-go-back"),L(i,!1),i.style.setProperty("pointer-events","none"),t&&(L(t,!1),t.style.setProperty("pointer-events","none"))},B=async n=>{let e=await D(n);return e&&v.isBrowser?M(e,n):R(n)},b=n=>{let e=n.enteringEl,i=n.leavingEl;e.classList.remove("ion-page-invisible"),e.style.removeProperty("pointer-events"),i!==void 0&&(i.classList.remove("ion-page-invisible"),i.style.removeProperty("pointer-events")),C.setViewFocus(e)},D=async n=>!n.leavingEl||!n.animated||n.duration===0?void 0:n.animationBuilder?n.animationBuilder:n.mode==="ios"?(await p()).iosTransitionAnimation:(await W()).mdTransitionAnimation,M=async(n,e)=>{await F(e,!0);let i=n(e.baseEl,e);h(e.enteringEl,e.leavingEl);let t=await x(i,e);return e.progressCallback&&e.progressCallback(void 0),t&&I(e.enteringEl,e.leavingEl),{hasCompleted:t,animation:i}},R=async n=>{let e=n.enteringEl,i=n.leavingEl,t=c.get("focusManagerPriority",!1);return await F(n,t),h(e,i),I(e,i),{hasCompleted:!0}},F=async(n,e)=>{(n.deepWait!==void 0?n.deepWait:e)&&await Promise.all([m(n.enteringEl),m(n.leavingEl)]),await q(n.viewIsReady,n.enteringEl)},q=async(n,e)=>{n&&await n(e)},x=(n,e)=>{let i=e.progressCallback,t=new Promise(a=>{n.onFinish(s=>a(s===1))});return i?(n.progressStart(!0),i(n)):n.play(),t},h=(n,e)=>{d(e,k),d(n,P)},I=(n,e)=>{d(n,V),d(e,T)},d=(n,e)=>{if(n){let i=new CustomEvent(e,{bubbles:!1,cancelable:!1});n.dispatchEvent(i)}},$=()=>new Promise(n=>r(()=>r(()=>n()))),m=async n=>{let e=n;if(e){if(e.componentOnReady!=null){if(await e.componentOnReady()!=null)return}else if(e.__registerHost!=null){await new Promise(t=>r(t));return}await Promise.all(Array.from(e.children).map(m))}},L=(n,e)=>{e?(n.setAttribute("aria-hidden","true"),n.classList.add("ion-page-hidden")):(n.hidden=!1,n.removeAttribute("aria-hidden"),n.classList.remove("ion-page-hidden"))},H=(n,e,i)=>{n!==void 0&&(n.style.zIndex=i==="back"?"99":"101"),e!==void 0&&(e.style.zIndex="100")},A=(n,e)=>{if(!n)return;let i="header-transitioning";e?n.classList.add(i):n.classList.remove(i)},G=n=>{if(n.classList.contains("ion-page"))return n;let e=n.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return e||n},O=n=>{let e=n.enteringEl,i=n.leavingEl,t=n.direction;if(n.mode!=="ios")return null;let s=t==="back"?i:e;return s?s.querySelector("ion-header"):null};export{k as a,T as b,z as c,N as d,d as e,$ as f,m as g,L as h,G as i};
