import{z as Y}from"./chunk-HC5WD3P2.js";import{a as Z}from"./chunk-HC3BP3NQ.js";import{a as $}from"./chunk-OPGM3H6O.js";import{$ as a,G as r,H as L,M as v,Sb as q,Ub as O,V as W,Va as A,Vb as U,W as k,Wb as j,Y as g,Yb as H,Z as _,_ as I,aa as o,ba as N,cc as z,dc as G,ec as J,fa as M,ga as b,gb as D,ha as B,ic as K,lb as F,q as h,qb as x,sa as d,sc as Q,t as C,ta as P,tc as R,u as f,ua as y,vc as X,wa as E,xa as c,xb as V,ya as m,za as p}from"./chunk-FBZGSWPW.js";import{a as T,i as S}from"./chunk-C4LRBQUY.js";var w=(l,i)=>i.id;function te(l,i){if(l&1&&(a(0,"ion-select-option",4),d(1),o()),l&2){let e=i.$implicit;I("value",e.id),r(),y(" ",e.label," ")}}function ne(l,i){if(l&1&&(a(0,"ion-select-option",4),d(1),o()),l&2){let e=i.$implicit;I("value",e.id),r(),y(" ",e.label," ")}}function ie(l,i){if(l&1&&(a(0,"ion-select-option",4),d(1),o()),l&2){let e=i.$implicit;I("value",e.id),r(),y(" ",e.label," ")}}function re(l,i){if(l&1){let e=M();a(0,"ion-button",13),b("click",function(){C(e);let s=B();return f(s.cancelEdit())}),d(1," Cancel "),o()}}function ae(l,i){if(l&1){let e=M();a(0,"ion-item",14),b("click",function(){let s=C(e).$implicit,n=B();return f(n.editBattery(s))}),a(1,"ion-label")(2,"h3"),d(3),o(),a(4,"p"),d(5),o(),a(6,"p"),d(7),o()(),a(8,"ion-button",15),b("click",function(){let s=C(e).$implicit,n=B();return f(n.confirmDelete(s))}),N(9,"ion-icon",16),o()()}if(l&2){let e=i.$implicit,t=B();r(3),P(e.label),r(2),E("",t.getBrandName(e.brandId)," - ",t.getSeriesName(e.seriesId)," - ",t.getTypeName(e.typeId)),r(2),E("",e.model," - ",e.cellsNumber," cells - ",e.mA,"mA")}}var u=class u{batteries=[];brands=[];series=[];types=[];dataChanged=new L;sqlite=h(Z);toast=h($);alertController=h(Y);isEditing=!1;currentBattery={label:"",brandId:0,seriesId:0,typeId:0,model:"",cellsNumber:0,mA:0,date:new Date().toISOString().split("T")[0],deleted:0,enabled:1};resetForm(){this.currentBattery={label:"",brandId:0,seriesId:0,typeId:0,model:"",cellsNumber:0,mA:0,date:new Date().toISOString().split("T")[0],deleted:0,enabled:1},this.isEditing=!1}async saveBattery(){var i;if(!((i=this.currentBattery.label)!=null&&i.trim())){this.toast.showWarning("Battery label is required");return}try{let e={brandId:this.currentBattery.brandId||0,seriesId:this.currentBattery.seriesId||0,typeId:this.currentBattery.typeId||0,cellsNumber:this.currentBattery.cellsNumber||0,date:this.currentBattery.date||new Date().toISOString().split("T")[0],label:this.currentBattery.label,mA:this.currentBattery.mA||0,model:this.currentBattery.model||"",deleted:0,enabled:1};this.isEditing&&this.currentBattery.id?(await this.sqlite.updateBattery(this.currentBattery.id,e),this.toast.showBatteryUpdated()):(await this.sqlite.insertBattery(e),this.toast.showBatteryCreated()),this.resetForm(),this.dataChanged.emit()}catch(e){console.error("Error saving battery:",e),this.toast.showBatterySaveError()}}editBattery(i){this.currentBattery=T({},i),this.isEditing=!0}cancelEdit(){this.resetForm()}async confirmDelete(i){await(await this.alertController.create({header:"Confirm Delete",message:`Are you sure you want to delete battery "${i.label}"?`,buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",role:"destructive",handler:()=>{this.deleteBattery(i)}}]})).present()}async deleteBattery(i){try{await this.sqlite.deleteBattery(i.id),this.toast.showBatteryDeleted(),this.dataChanged.emit()}catch(e){console.error("Error deleting battery:",e),this.toast.showBatteryDeleteError()}}getBrandName(i){var e;return((e=this.brands.find(t=>t.id===i))==null?void 0:e.label)||"Unknown"}getSeriesName(i){var e;return((e=this.series.find(t=>t.id===i))==null?void 0:e.label)||"Unknown"}getTypeName(i){var e;return((e=this.types.find(t=>t.id===i))==null?void 0:e.label)||"Unknown"}};S(u,"\u0275fac",function(e){return new(e||u)}),S(u,"\u0275cmp",v({type:u,selectors:[["app-battery-list"]],inputs:{batteries:"batteries",brands:"brands",series:"series",types:"types"},outputs:{dataChanged:"dataChanged"},decls:36,vars:11,consts:[[1,"ion-card-primary","glass-card"],[2,"color","var(--ion-color-primary)","font-weight","600"],["label","Label","labelPlacement","floating","placeholder","Enter battery label",3,"ngModelChange","ngModel"],["label","Brand","labelPlacement","floating","placeholder","Select brand",3,"ngModelChange","ngModel"],[3,"value"],["label","Series","labelPlacement","floating","placeholder","Select series",3,"ngModelChange","ngModel"],["label","Type","labelPlacement","floating","placeholder","Select type",3,"ngModelChange","ngModel"],["label","Model","labelPlacement","floating","placeholder","Enter model",3,"ngModelChange","ngModel"],["label","Cells","labelPlacement","floating","type","number","placeholder","Enter cell count",3,"ngModelChange","ngModel"],["label","mA","labelPlacement","floating","type","number","placeholder","Enter mA",3,"ngModelChange","ngModel"],["expand","block",3,"click"],["expand","block","fill","outline"],[1,"glass-card"],["expand","block","fill","outline",3,"click"],[3,"click"],["slot","end","fill","clear","color","danger",3,"click"],["name","trash"]],template:function(e,t){e&1&&(a(0,"ion-card",0)(1,"ion-card-header")(2,"ion-card-title",1),d(3),o()(),a(4,"ion-card-content")(5,"ion-item")(6,"ion-input",2),p("ngModelChange",function(n){return m(t.currentBattery.label,n)||(t.currentBattery.label=n),n}),o()(),a(7,"ion-item")(8,"ion-select",3),p("ngModelChange",function(n){return m(t.currentBattery.brandId,n)||(t.currentBattery.brandId=n),n}),g(9,te,2,2,"ion-select-option",4,w),o()(),a(11,"ion-item")(12,"ion-select",5),p("ngModelChange",function(n){return m(t.currentBattery.seriesId,n)||(t.currentBattery.seriesId=n),n}),g(13,ne,2,2,"ion-select-option",4,w),o()(),a(15,"ion-item")(16,"ion-select",6),p("ngModelChange",function(n){return m(t.currentBattery.typeId,n)||(t.currentBattery.typeId=n),n}),g(17,ie,2,2,"ion-select-option",4,w),o()(),a(19,"ion-item")(20,"ion-input",7),p("ngModelChange",function(n){return m(t.currentBattery.model,n)||(t.currentBattery.model=n),n}),o()(),a(21,"ion-item")(22,"ion-input",8),p("ngModelChange",function(n){return m(t.currentBattery.cellsNumber,n)||(t.currentBattery.cellsNumber=n),n}),o()(),a(23,"ion-item")(24,"ion-input",9),p("ngModelChange",function(n){return m(t.currentBattery.mA,n)||(t.currentBattery.mA=n),n}),o()(),a(25,"ion-button",10),b("click",function(){return t.saveBattery()}),d(26),o(),W(27,re,2,0,"ion-button",11),o()(),a(28,"ion-card",12)(29,"ion-card-header")(30,"ion-card-title",1),d(31),o()(),a(32,"ion-card-content")(33,"ion-list"),g(34,ae,10,7,"ion-item",null,w),o()()()),e&2&&(r(3),y(" ",t.isEditing?"Edit Battery":"Add Battery"," "),r(3),c("ngModel",t.currentBattery.label),r(2),c("ngModel",t.currentBattery.brandId),r(),_(t.brands),r(3),c("ngModel",t.currentBattery.seriesId),r(),_(t.series),r(3),c("ngModel",t.currentBattery.typeId),r(),_(t.types),r(3),c("ngModel",t.currentBattery.model),r(2),c("ngModel",t.currentBattery.cellsNumber),r(2),c("ngModel",t.currentBattery.mA),r(2),y(" ",t.isEditing?"Update Battery":"Add Battery"," "),r(),k(t.isEditing?27:-1),r(4),y(" Batteries (",t.batteries.length,") "),r(3),_(t.batteries))},dependencies:[A,V,F,x,D,J,z,G,q,Q,R,X,K,O,j,H,U],encapsulation:2}));var ee=u;export{ee as a};
