import{z as J}from"./chunk-HC5WD3P2.js";import{a as K}from"./chunk-HC3BP3NQ.js";import{a as Q}from"./chunk-OPGM3H6O.js";import{$ as n,Ba as D,G as s,H as v,M as I,Sb as A,Ub as N,V as x,Va as F,Vb as B,W as k,Wb as U,Y as M,Yb as j,Z as L,aa as o,ba as C,cc as H,dc as O,ec as $,fa as f,ga as m,gb as V,ha as _,lb as W,q as u,qb as q,ra as T,sa as a,sc as z,t as S,tc as G,u as h,ua as p,xa as b,xb as P,ya as w,za as E}from"./chunk-FBZGSWPW.js";import{a as y,i as g}from"./chunk-C4LRBQUY.js";var X=(d,t)=>t.id;function Y(d,t){if(d&1){let e=f();n(0,"ion-button",6),m("click",function(){S(e);let l=_();return h(l.cancelEdit())}),a(1," Cancel "),o()}}function Z(d,t){if(d&1){let e=f();n(0,"ion-item",7),m("click",function(){let l=S(e).$implicit,r=_();return h(r.editSeries(l))}),n(1,"ion-label")(2,"div",8),C(3,"div"),a(4),o()(),n(5,"ion-button",9),m("click",function(){let l=S(e).$implicit,r=_();return h(r.confirmDelete(l))}),C(6,"ion-icon",10),o()()}if(d&2){let e=t.$implicit;s(3),T(D("width: 20px; height: 20px; border-radius: 50%; background-color: ",e.color,"; border: 1px solid #ccc;")),s(),p(" ",e.label," ")}}var c=class c{series=[];dataChanged=new v;sqlite=u(K);toast=u(Q);alertController=u(J);isEditing=!1;currentSeries={label:"",color:"#000000",deleted:0,enabled:1};resetForm(){this.currentSeries={label:"",color:"#000000",deleted:0,enabled:1},this.isEditing=!1}async saveSeries(){var t;if(!((t=this.currentSeries.label)!=null&&t.trim())){this.toast.showWarning("Series label is required");return}try{this.isEditing&&this.currentSeries.id?(await this.sqlite.updateSeries(this.currentSeries.id,this.currentSeries.label,this.currentSeries.color||"#000000"),this.toast.showSeriesUpdated()):(await this.sqlite.insertSeries(this.currentSeries.label,this.currentSeries.color||"#000000"),this.toast.showSeriesCreated()),this.resetForm(),this.dataChanged.emit()}catch(e){console.error("Error saving series:",e),this.toast.showSeriesSaveError()}}editSeries(t){this.currentSeries=y({},t),this.isEditing=!0}cancelEdit(){this.resetForm()}async confirmDelete(t){await(await this.alertController.create({header:"Confirm Delete",message:`Are you sure you want to delete series "${t.label}"?`,buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",role:"destructive",handler:()=>{this.deleteSeries(t)}}]})).present()}async deleteSeries(t){try{await this.sqlite.deleteSeries(t.id),this.toast.showSeriesDeleted(),this.dataChanged.emit()}catch(e){console.error("Error deleting series:",e),this.toast.showSeriesDeleteError()}}};g(c,"\u0275fac",function(e){return new(e||c)}),g(c,"\u0275cmp",I({type:c,selectors:[["app-series-list"]],inputs:{series:"series"},outputs:{dataChanged:"dataChanged"},decls:20,vars:6,consts:[[1,"glass-card"],[2,"color","var(--ion-color-primary)","font-weight","600"],["label","Label","labelPlacement","floating","placeholder","Enter series label",3,"ngModelChange","ngModel"],["label","Color","labelPlacement","floating","type","color","placeholder","Select color",3,"ngModelChange","ngModel"],["expand","block",3,"click"],["expand","block","fill","outline"],["expand","block","fill","outline",3,"click"],[3,"click"],[2,"display","flex","align-items","center","gap","8px"],["slot","end","fill","clear","color","danger",3,"click"],["name","trash"]],template:function(e,i){e&1&&(n(0,"ion-card",0)(1,"ion-card-header")(2,"ion-card-title",1),a(3),o()(),n(4,"ion-card-content")(5,"ion-item")(6,"ion-input",2),E("ngModelChange",function(r){return w(i.currentSeries.label,r)||(i.currentSeries.label=r),r}),o()(),n(7,"ion-item")(8,"ion-input",3),E("ngModelChange",function(r){return w(i.currentSeries.color,r)||(i.currentSeries.color=r),r}),o()(),n(9,"ion-button",4),m("click",function(){return i.saveSeries()}),a(10),o(),x(11,Y,2,0,"ion-button",5),o()(),n(12,"ion-card",0)(13,"ion-card-header")(14,"ion-card-title",1),a(15),o()(),n(16,"ion-card-content")(17,"ion-list"),M(18,Z,7,4,"ion-item",null,X),o()()()),e&2&&(s(3),p(" ",i.isEditing?"Edit Series":"Add Series"," "),s(3),b("ngModel",i.currentSeries.label),s(2),b("ngModel",i.currentSeries.color),s(2),p(" ",i.isEditing?"Update Series":"Add Series"," "),s(),k(i.isEditing?11:-1),s(4),p(" Series (",i.series.length,") "),s(3),L(i.series))},dependencies:[F,P,W,q,V,$,H,O,A,z,G,N,U,j,B],encapsulation:2}));var R=c;export{R as a};
