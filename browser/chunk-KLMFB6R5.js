import{z as G}from"./chunk-HC5WD3P2.js";import{a as J}from"./chunk-HC3BP3NQ.js";import{a as K}from"./chunk-OPGM3H6O.js";import{$ as n,G as o,H as g,M as b,Sb as A,Ub as N,V as w,Va as D,Vb as P,W as E,Wb as W,Y as v,Yb as $,Z as I,aa as r,ba as x,cc as U,dc as j,ec as H,fa as f,ga as d,gb as B,ha as T,lb as F,q as m,qb as V,sa as s,sc as O,t as y,ta as k,tc as z,u,ua as h,xa as S,xb as q,ya as L,za as M}from"./chunk-FBZGSWPW.js";import{a as C,i as _}from"./chunk-C4LRBQUY.js";var R=(c,e)=>e.id;function X(c,e){if(c&1){let t=f();n(0,"ion-button",5),d("click",function(){y(t);let a=T();return u(a.cancelEdit())}),s(1," Cancel "),r()}}function Y(c,e){if(c&1){let t=f();n(0,"ion-item",6),d("click",function(){let a=y(t).$implicit,l=T();return u(l.editType(a))}),n(1,"ion-label"),s(2),r(),n(3,"ion-button",7),d("click",function(){let a=y(t).$implicit,l=T();return u(l.confirmDelete(a))}),x(4,"ion-icon",8),r()()}if(c&2){let t=e.$implicit;o(2),k(t.label)}}var p=class p{types=[];dataChanged=new g;sqlite=m(J);toast=m(K);alertController=m(G);isEditing=!1;currentType={label:"",deleted:0,enabled:1};resetForm(){this.currentType={label:"",deleted:0,enabled:1},this.isEditing=!1}async saveType(){var e;if(!((e=this.currentType.label)!=null&&e.trim())){this.toast.showWarning("Type label is required");return}try{this.isEditing&&this.currentType.id?(await this.sqlite.updateType(this.currentType.id,this.currentType.label),this.toast.showTypeUpdated()):(await this.sqlite.insertType(this.currentType.label),this.toast.showTypeCreated()),this.resetForm(),this.dataChanged.emit()}catch(t){console.error("Error saving type:",t),this.toast.showTypeSaveError()}}editType(e){this.currentType=C({},e),this.isEditing=!0}cancelEdit(){this.resetForm()}async confirmDelete(e){await(await this.alertController.create({header:"Confirm Delete",message:`Are you sure you want to delete type "${e.label}"?`,buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",role:"destructive",handler:()=>{this.deleteType(e)}}]})).present()}async deleteType(e){try{await this.sqlite.deleteType(e.id),this.toast.showTypeDeleted(),this.dataChanged.emit()}catch(t){console.error("Error deleting type:",t),this.toast.showTypeDeleteError()}}};_(p,"\u0275fac",function(t){return new(t||p)}),_(p,"\u0275cmp",b({type:p,selectors:[["app-type-list"]],inputs:{types:"types"},outputs:{dataChanged:"dataChanged"},decls:18,vars:5,consts:[[1,"glass-card"],[2,"color","var(--ion-color-primary)","font-weight","600"],["label","Label","labelPlacement","floating","placeholder","Enter type label",3,"ngModelChange","ngModel"],["expand","block",3,"click"],["expand","block","fill","outline"],["expand","block","fill","outline",3,"click"],[3,"click"],["slot","end","fill","clear","color","danger",3,"click"],["name","trash"]],template:function(t,i){t&1&&(n(0,"ion-card",0)(1,"ion-card-header")(2,"ion-card-title",1),s(3),r()(),n(4,"ion-card-content")(5,"ion-item")(6,"ion-input",2),M("ngModelChange",function(l){return L(i.currentType.label,l)||(i.currentType.label=l),l}),r()(),n(7,"ion-button",3),d("click",function(){return i.saveType()}),s(8),r(),w(9,X,2,0,"ion-button",4),r()(),n(10,"ion-card",0)(11,"ion-card-header")(12,"ion-card-title",1),s(13),r()(),n(14,"ion-card-content")(15,"ion-list"),v(16,Y,5,1,"ion-item",null,R),r()()()),t&2&&(o(3),h(" ",i.isEditing?"Edit Type":"Add Type"," "),o(3),S("ngModel",i.currentType.label),o(2),h(" ",i.isEditing?"Update Type":"Add Type"," "),o(),E(i.isEditing?9:-1),o(4),h(" Types (",i.types.length,") "),o(3),I(i.types))},dependencies:[D,q,F,V,B,H,U,j,A,O,z,N,W,$,P],encapsulation:2}));var Q=p;export{Q as a};
